"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[328],{6328:(Ct,Z,i)=>{i.r(Z),i.d(Z,{ProductsManagementModule:()=>Zt});var m=i(8583),g=i(8307),s=i(2789),T=i(9692),f=i(1494),d=i(2238),x=i(5917),l=i(3679),_=i(5257),h=i(8002),t=i(7716),C=i(755),q=i(4971),S=i(5327);let P=(()=>{class e{constructor(o){this.toast=o}showSuccess(o,n=3e3){this.toast.success(o,{duration:n})}showFail(o,n=3e3){this.toast.error(o,{duration:n})}showLoading(o){this.toast.loading(o,{position:"top-center",id:"loading"})}hideLoading(){this.toast.close("loading")}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(S.jE))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=i(8295),v=i(9983),I=i(7441),A=i(1095),y=i(6627),U=i(2458);function w(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Title Required "),t.qZA())}function N(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Price Required "),t.qZA())}function b(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Image Required "),t.qZA())}function F(e,a){if(1&e&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function Y(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Description Required "),t.qZA())}const O=function(e){return{cursor:e}};let D=(()=>{class e{constructor(o,n,r,c,p,Tt){this.data=o,this.dialogRef=n,this.productsService=r,this.categoryService=c,this.toasterService=p,this.fb=Tt,this.categories$=(0,x.of)([]),this.loading=!1}ngOnInit(){this.categories$=this.categoryService.getAllCategories(),this.ItemForm=this.fb.group({title:["",[l.kI.required]],price:["",[l.kI.required]],description:["",[l.kI.required]],image:["",[l.kI.required]],category:["",[l.kI.required]]}),this.data.isEdit&&(this.ItemForm.controls.title.patchValue(this.data.item.title),this.ItemForm.controls.price.patchValue(this.data.item.price),this.ItemForm.controls.description.patchValue(this.data.item.description),this.ItemForm.controls.image.patchValue(this.data.item.image),this.ItemForm.controls.category.patchValue(this.data.item.category)),console.log(this.data)}onSubmit(){if(this.loading=!0,this.data.isEdit){const o=Object.assign(Object.assign({},this.ItemForm.value),{id:this.data.id});this.productsService.updateProduct(this.data.id,o).subscribe(n=>{this.loading=!1,this.dialogRef.afterClosed().pipe((0,_.q)(1),(0,h.U)(r=>r)),this.dialogRef.close(n)})}else this.productsService.addNewProduct(this.ItemForm.value).subscribe(o=>{this.loading=!1,this.dialogRef.afterClosed().pipe((0,_.q)(1),(0,h.U)(n=>n)),this.dialogRef.close(o)})}dismiss(){this.dialogRef.close(null)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.WI),t.Y36(d.so),t.Y36(C.s),t.Y36(q.H),t.Y36(P),t.Y36(l.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-edit-product"]],decls:52,vars:15,consts:[[1,"popup__container"],["mat-dialog-title",""],[1,"example-container"],[1,"form__wrapper",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],["appearance","fill",1,"w-100"],["formControlName","title","matInput","","type","text"],[4,"ngIf"],["formControlName","price","matInput","","type","number"],["formControlName","image","matInput","","type","text"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","description","matInput","","type","text"],["color","primary","mat-button","",3,"disabled","ngStyle","click"],["color","primary","mat-button","",3,"click"],[3,"value"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"mat-dialog-content"),t.TgZ(4,"div",2),t.TgZ(5,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"mat-form-field",6),t.TgZ(9,"mat-label"),t._uU(10,"Title"),t.qZA(),t._UZ(11,"input",7),t.YNc(12,w,2,0,"mat-error",8),t.qZA(),t._UZ(13,"br"),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"mat-form-field",6),t.TgZ(16,"mat-label"),t._uU(17,"Price"),t.qZA(),t._UZ(18,"input",9),t.YNc(19,N,2,0,"mat-error",8),t.qZA(),t._UZ(20,"br"),t.qZA(),t.TgZ(21,"div",5),t.TgZ(22,"mat-form-field",6),t.TgZ(23,"mat-label"),t._uU(24,"Image"),t.qZA(),t._UZ(25,"input",10),t.YNc(26,b,2,0,"mat-error",8),t.qZA(),t._UZ(27,"br"),t.qZA(),t.TgZ(28,"div",5),t.TgZ(29,"mat-form-field",6),t.TgZ(30,"mat-label"),t._uU(31,"Category"),t.qZA(),t.TgZ(32,"mat-select",11),t.YNc(33,F,2,2,"mat-option",12),t.ALo(34,"async"),t.qZA(),t.qZA(),t._UZ(35,"br"),t.qZA(),t.TgZ(36,"div",5),t.TgZ(37,"mat-form-field",6),t.TgZ(38,"mat-label"),t._uU(39,"Description"),t.qZA(),t._UZ(40,"textarea",13),t.YNc(41,Y,2,0,"mat-error",8),t.qZA(),t._UZ(42,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"mat-dialog-actions"),t.TgZ(44,"button",14),t.NdJ("click",function(){return n.onSubmit()}),t.TgZ(45,"mat-icon"),t._uU(46,"save"),t.qZA(),t._uU(47," Save "),t.qZA(),t.TgZ(48,"button",15),t.NdJ("click",function(){return n.dismiss()}),t.TgZ(49,"mat-icon"),t._uU(50,"cancel"),t.qZA(),t._uU(51," Cancel "),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.hij("",n.data.isEdit?"Edit Product":"Add new Product"," "),t.xp6(3),t.Q6J("formGroup",n.ItemForm),t.xp6(7),t.Q6J("ngIf",(null==n.ItemForm.controls.title.errors?null:n.ItemForm.controls.title.errors.required)&&n.ItemForm.controls.title.touched),t.xp6(7),t.Q6J("ngIf",(null==n.ItemForm.controls.price.errors?null:n.ItemForm.controls.price.errors.required)&&n.ItemForm.controls.price.touched),t.xp6(7),t.Q6J("ngIf",(null==n.ItemForm.controls.image.errors?null:n.ItemForm.controls.image.errors.required)&&n.ItemForm.controls.image.touched),t.xp6(7),t.Q6J("ngForOf",t.lcZ(34,11,n.categories$)),t.xp6(8),t.Q6J("ngIf",(null==n.ItemForm.controls.description.errors?null:n.ItemForm.controls.description.errors.required)&&n.ItemForm.controls.description.touched),t.xp6(3),t.ekj("spinner",n.loading),t.Q6J("disabled",n.ItemForm.untouched||n.ItemForm.invalid||n.loading)("ngStyle",t.VKq(13,O,n.ItemForm.untouched||n.ItemForm.invalid||n.loading?"not-allowed":"pointer")))},directives:[d.uh,d.xY,l._Y,l.JL,l.sg,u.KE,u.hX,l.Fj,v.Nt,l.JJ,l.u,m.O5,l.wV,I.gD,m.sg,d.H8,A.lW,m.PC,y.Hw,u.TO,U.ey],pipes:[m.Ov],styles:[".example-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.example-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}  .mat-dialog-container{min-width:50vw}  .mat-dialog-actions{justify-content:space-between}button[_ngcontent-%COMP%]{position:relative}"]}),e})();var M=i(6772);let J=(()=>{class e{constructor(o){this.dialog=o}open(o){this.dialogRef=this.dialog.open(M.t,{data:{title:o.title,message:o.message,cancelText:o.cancelText,confirmText:o.confirmText}})}confirmed(){return this.dialogRef.afterClosed().pipe((0,_.q)(1),(0,h.U)(o=>o))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(d.uw))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Q=i(6184),R=i(2133),E=i(4574);function k(e,a){1&e&&t._UZ(0,"app-loader")}function z(e,a){}function j(e,a){1&e&&(t.TgZ(0,"th",30),t._uU(1,"ID."),t.qZA())}function B(e,a){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.id)}}function L(e,a){1&e&&(t.TgZ(0,"th",32),t._uU(1,"Image"),t.qZA())}function H(e,a){if(1&e&&(t.TgZ(0,"td",31),t._UZ(1,"img",33),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Q6J("alt",o.description)("lazyLoad",o.image)}}function $(e,a){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Category"),t.qZA())}const G=function(e){return[e]};function V(e,a){if(1&e&&(t.TgZ(0,"td",31),t.TgZ(1,"a",34),t.ALo(2,"localize"),t._uU(3),t.qZA(),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(4,G,t.lcZ(2,2,"/admin/category-management"))),t.xp6(2),t.Oqu(o.category)}}function W(e,a){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Description"),t.qZA())}function K(e,a){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.description)}}function X(e,a){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Price"),t.qZA())}function tt(e,a){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.price,"EGY")," ")}}function et(e,a){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Rating"),t.qZA())}function ot(e,a){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.rating.rate/o.rating.count," ")}}function nt(e,a){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Actions"),t.qZA())}function at(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",31),t.TgZ(1,"div",35),t.TgZ(2,"button",36),t.NdJ("click",function(){const c=t.CHM(o).$implicit;return t.oxw(2).OpenDialog(!0,c.id,c)}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA(),t.qZA(),t.TgZ(5,"button",37),t.NdJ("click",function(){const c=t.CHM(o).$implicit;return t.oxw(2).DeleteItem(c)}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function it(e,a){1&e&&(t.TgZ(0,"th",30),t._uU(1,"Title"),t.qZA())}function rt(e,a){if(1&e&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.title)}}function ct(e,a){1&e&&t._UZ(0,"tr",38)}function lt(e,a){1&e&&t._UZ(0,"tr",39)}function st(e,a){if(1&e&&(t.TgZ(0,"tr",40),t.TgZ(1,"td",41),t._uU(2),t.qZA(),t.qZA()),2&e){t.oxw(2);const o=t.MAs(14);t.xp6(2),t.hij(' No data matching the filter "',o.value,'" ')}}const mt=function(){return[5,10,20,50,100]};function dt(e,a){if(1&e&&(t.TgZ(0,"div",13),t.TgZ(1,"table",14),t.ynx(2,15),t.YNc(3,j,2,0,"th",16),t.YNc(4,B,2,1,"td",17),t.BQk(),t.ynx(5,18),t.YNc(6,L,2,0,"th",19),t.YNc(7,H,2,2,"td",17),t.BQk(),t.ynx(8,20),t.YNc(9,$,2,0,"th",16),t.YNc(10,V,4,6,"td",17),t.BQk(),t.ynx(11,21),t.YNc(12,W,2,0,"th",16),t.YNc(13,K,2,1,"td",17),t.BQk(),t.ynx(14,22),t.YNc(15,X,2,0,"th",16),t.YNc(16,tt,3,4,"td",17),t.BQk(),t.ynx(17,23),t.YNc(18,et,2,0,"th",16),t.YNc(19,ot,2,1,"td",17),t.BQk(),t.ynx(20,24),t.YNc(21,nt,2,0,"th",16),t.YNc(22,at,8,0,"td",17),t.BQk(),t.ynx(23,25),t.YNc(24,it,2,0,"th",16),t.YNc(25,rt,2,1,"td",17),t.BQk(),t.YNc(26,ct,1,0,"tr",26),t.YNc(27,lt,1,0,"tr",27),t.YNc(28,st,3,1,"tr",28),t.qZA(),t._UZ(29,"mat-paginator",29),t.qZA()),2&e){const o=a.data,n=t.oxw();t.xp6(1),t.Q6J("dataSource",o),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(5,mt))("pageSize",5)}}const ut=function(e){return{data:e}},ft=[{path:"",component:(()=>{class e{constructor(o,n,r,c){this.productsService=o,this.dialog=n,this.confirmDialogService=r,this.toasterService=c,this.displayedColumns=["id","image","category","price","title","description","actions"],this.loading=!1}ngOnInit(){this.productsService.getAllProducts().subscribe(o=>{this.dataSource=new s.by(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase()}OpenDialog(o=!1,n=0,r={}){console.log("OpenDialog"),this.dialog.open(D,{data:{isEdit:o,id:n,item:r}}).afterClosed().subscribe(c=>{const p=this.dataSource.data.indexOf(r);o?(this.dataSource.data[p]=c,this.dataSource._updateChangeSubscription(),this.toasterService.showSuccess("Item Updated Successfully")):(this.dataSource.data.push(c),this.dataSource._updateChangeSubscription(),this.toasterService.showSuccess("Item Created Successfully"))})}DeleteItem(o){this.confirmDialogService.open({title:"Are you sure to delete this item",cancelText:"Cancel",confirmText:"Delete"}),this.confirmDialogService.confirmed().subscribe(n=>{n&&(this.loading=!0,this.productsService.deleteProduct(o.id).subscribe(r=>{const c=this.dataSource.data.indexOf(o);this.dataSource.data.splice(c,1),this.dataSource._updateChangeSubscription(),this.loading=!1,this.toasterService.showSuccess("Item Deleted Successfully")}))})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(C.s),t.Y36(d.uw),t.Y36(J),t.Y36(P))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-products-page"]],viewQuery:function(o,n){if(1&o&&(t.Gf(T.NW,5),t.Gf(f.YE,5)),2&o){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first),t.iGM(r=t.CRH())&&(n.sort=r.first)}},decls:20,vars:5,consts:[[4,"ngIf"],[1,"page__container","container"],[1,"row"],[1,"col-12"],[1,"page__actions","d-flex","justify-content-end"],["color","primary","mat-raised-button","",3,"click"],[1,"page__content","my-4"],[1,"filter"],["matInput","","placeholder","Filter",3,"keyup"],["input",""],[1,"table__container"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],["tableTemplate",""],[1,"table__wrapper","mat-elevation-z2"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","category"],["matColumnDef","description"],["matColumnDef","price"],["matColumnDef","rates"],["matColumnDef","actions"],["matColumnDef","title"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["defaultImage","assets/images/default.jpg","errorImage","assets/images/default.jpg","height","100px","width","75px",3,"alt","lazyLoad"],[1,"link",3,"routerLink"],[1,"table__actions"],["color","primary","mat-mini-fab","",3,"click"],["color","warn","mat-mini-fab","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,n){if(1&o&&(t.YNc(0,k,1,0,"app-loader",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"button",5),t.NdJ("click",function(){return n.OpenDialog(!1)}),t._uU(6,"Add New Product"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"div",6),t.TgZ(9,"div",7),t.TgZ(10,"mat-form-field"),t.TgZ(11,"mat-label"),t._uU(12,"Filter"),t.qZA(),t.TgZ(13,"input",8,9),t.NdJ("keyup",function(c){return n.applyFilter(c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",3),t.TgZ(16,"div",10),t.YNc(17,z,0,0,"ng-template",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,dt,30,6,"ng-template",null,12,t.W1O)),2&o){const r=t.MAs(19);t.Q6J("ngIf",n.loading),t.xp6(17),t.Q6J("ngTemplateOutletContext",t.VKq(3,ut,n.dataSource))("ngTemplateOutlet",r)}},directives:[m.O5,A.lW,u.KE,u.hX,v.Nt,m.tP,Q.d,s.BZ,f.YE,s.w1,s.fO,s.Dz,s.as,s.nj,s.Ee,T.NW,s.ge,f.nU,s.ev,R.z1,g.yS,y.Hw,s.XQ,s.Gk],pipes:[E.lO,m.H9],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.link[_ngcontent-%COMP%]{font-size:var(--font-size-16, 1rem);font-weight:600;color:#404553;text-decoration:none}.link[_ngcontent-%COMP%]:hover{text-decoration:none}.mat-cell[_ngcontent-%COMP%]{padding-block:.5rem}.mat-column-description[_ngcontent-%COMP%], .mat-column-title[_ngcontent-%COMP%]{width:250px;max-width:250px}.table__actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-flow:row;flex-wrap:nowrap}.table__actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-inline:.5rem}"]}),e})()},{path:"**",component:i(3599).w}];let _t=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(ft)],g.Bz]}),e})();var ht=i(5851);let Zt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,_t,ht.m]]}),e})()}}]);